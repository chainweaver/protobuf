{
  "swagger": "2.0",
  "info": {
    "title": "analyticsService.proto",
    "version": "version not set"
  },
  "schemes": [
    "http",
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/btc/{network}/analytics/job/{ticket}": {
      "get": {
        "operationId": "GetAnalyticsJob",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/btcJob"
            }
          }
        },
        "parameters": [
          {
            "name": "network",
            "in": "path",
            "required": true,
            "type": "string",
            "enum": [
              "MAINNET",
              "mainnet",
              "TEST",
              "test"
            ]
          },
          {
            "name": "ticket",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "tags": [
          "AnalyticsService"
        ]
      }
    },
    "/btc/{network}/analytics/job/{ticket}/results": {
      "get": {
        "operationId": "GetAnalyticsJobResults",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/btcJobResults"
            }
          }
        },
        "parameters": [
          {
            "name": "network",
            "in": "path",
            "required": true,
            "type": "string",
            "enum": [
              "MAINNET",
              "mainnet",
              "TEST",
              "test"
            ]
          },
          {
            "name": "ticket",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32"
          }
        ],
        "tags": [
          "AnalyticsService"
        ]
      }
    },
    "/btc/{network}/analytics/{enginename}": {
      "post": {
        "operationId": "CreateAnalyticsJob",
        "responses": {
          "200": {
            "description": "A successful response.",
            "schema": {
              "$ref": "#/definitions/btcJob"
            }
          }
        },
        "parameters": [
          {
            "name": "network",
            "in": "path",
            "required": true,
            "type": "string",
            "enum": [
              "MAINNET",
              "mainnet",
              "TEST",
              "test"
            ]
          },
          {
            "name": "enginename",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/btcCreateAnalyticsJobRequest"
            }
          }
        ],
        "tags": [
          "AnalyticsService"
        ]
      }
    }
  },
  "definitions": {
    "btcCreateAnalyticsJobRequest": {
      "type": "object",
      "properties": {
        "network": {
          "$ref": "#/definitions/btcNetworkAllowingAlias"
        },
        "enginename": {
          "type": "string"
        },
        "address": {
          "type": "string",
          "description": "Address hash this job is querying."
        },
        "value_threshold": {
          "type": "integer",
          "format": "int32",
          "description": "Minimal/threshold value (in satoshis) to query."
        },
        "limit": {
          "type": "integer",
          "format": "int32",
          "description": "Limit of results to return."
        },
        "start": {
          "type": "string",
          "description": "Beginning of time range to query."
        },
        "end": {
          "type": "string",
          "description": "End of time range to query."
        },
        "degree": {
          "type": "integer",
          "format": "int32",
          "description": "Degree of connectiveness to query."
        },
        "source": {
          "type": "string",
          "title": "IP address and port, of the form “0.0.0.0:80”. Ideally an IP and port combination found from another API lookup (for example, relayed_by from the Transaction Hash Endpoint)"
        }
      }
    },
    "btcJob": {
      "type": "object",
      "properties": {
        "token": {
          "type": "string",
          "description": "The token that created this job."
        },
        "analytics_engine": {
          "type": "string",
          "description": "The engine used for the job query."
        },
        "created_at": {
          "type": "string",
          "description": "The time this job was created."
        },
        "completed_at": {
          "type": "string",
          "description": "Optional When this job was completed; only present on complete jobs."
        },
        "finished": {
          "type": "boolean",
          "format": "boolean",
          "description": "true if this job is finished processing, false otherwise."
        },
        "started": {
          "type": "boolean",
          "format": "boolean",
          "description": "true if this job has begun processing, false otherwise."
        },
        "ticket": {
          "type": "string",
          "description": "Unique identifier for this job, used to get job status and results."
        },
        "result_path": {
          "type": "string",
          "description": "ptional URL to query job results; only present on complete jobs."
        },
        "args": {
          "$ref": "#/definitions/btcJobArgs",
          "description": "Query arguments for this job."
        }
      }
    },
    "btcJobArgs": {
      "type": "object",
      "properties": {
        "address": {
          "type": "string",
          "description": "Address hash this job is querying."
        },
        "value_threshold": {
          "type": "integer",
          "format": "int32",
          "description": "Minimal/threshold value (in satoshis) to query."
        },
        "limit": {
          "type": "integer",
          "format": "int32",
          "description": "Limit of results to return."
        },
        "start": {
          "type": "string",
          "description": "Beginning of time range to query."
        },
        "end": {
          "type": "string",
          "description": "End of time range to query."
        },
        "degree": {
          "type": "integer",
          "format": "int32",
          "description": "Degree of connectiveness to query."
        },
        "source": {
          "type": "string",
          "title": "IP address and port, of the form “0.0.0.0:80”. Ideally an IP and port combination found from another API lookup (for example, relayed_by from the Transaction Hash Endpoint)"
        }
      }
    },
    "btcJobResultArr": {
      "type": "object",
      "properties": {
        "DstAddr": {
          "type": "string"
        },
        "SrcAddr": {
          "type": "string"
        },
        "TxHash": {
          "type": "string"
        },
        "Value": {
          "type": "integer",
          "format": "int32"
        }
      }
    },
    "btcJobResults": {
      "type": "object",
      "properties": {
        "page": {
          "type": "integer",
          "format": "int32",
          "description": "Current page of results."
        },
        "more": {
          "type": "boolean",
          "format": "boolean",
          "description": "true if there are more results in a separate page; false otherwise."
        },
        "next_page": {
          "type": "string",
          "description": "Optional URL to get the next page of results; only present if there are more results to show."
        },
        "results": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/btcJobResultArr"
          },
          "description": "Results of analytics job; structure of results are dependent on engine-type of query, but are generally either strings of address hashes or JSON objects."
        }
      }
    },
    "btcNetworkAllowingAlias": {
      "type": "string",
      "enum": [
        "MAINNET",
        "mainnet",
        "TEST",
        "test"
      ],
      "default": "MAINNET"
    }
  }
}
